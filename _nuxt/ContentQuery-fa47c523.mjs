var b=Object.defineProperty;var c=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var w=(u,e,t)=>e in u?b(u,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):u[e]=t,n=(u,e)=>{for(var t in e||(e={}))C.call(e,t)&&w(u,t,e[t]);if(c)for(var t of c(e))k.call(e,t)&&w(u,t,e[t]);return u};import{h as N}from"./json-7fc8b91b.mjs";import{d as $,m as O,p as _,u as A,i as Q}from"./entry-5679079d.mjs";import{u as j}from"./asyncData-2c3e5c0b.mjs";import{q}from"./query-31fa24ad.mjs";import"./utils-b48226b8.mjs";var z=$({props:{path:{type:String,required:!1,default:void 0},only:{type:Array,required:!1,default:void 0},without:{type:Array,required:!1,default:void 0},where:{type:Object,required:!1,default:void 0},sort:{type:Object,required:!1,default:void 0},limit:{type:Number,required:!1,default:void 0},skip:{type:Number,required:!1,default:void 0},locale:{type:String,required:!1,default:void 0},find:{type:String,required:!1,default:void 0}},async setup(u){const{path:e,only:t,without:l,where:a,sort:o,limit:s,skip:f,locale:d,find:p}=O(u),h=_(()=>e.value.includes("/_")),{data:v,refresh:y}=await j(`content-query-${N(u)}`,()=>{let r;return e.value?r=q(e.value):r=q(),t.value&&(r=r.only(t.value)),l.value&&(r=r.without(l.value)),a.value&&(r=r.where(a.value)),o.value&&(r=r.sort(o.value)),s.value&&(r=r.limit(s.value)),f.value&&(r=r.skip(f.value)),d.value&&(r=r.where({_locale:d.value})),p.value==="one"?r.findOne():p.value==="surround"?e.value?r.findSurround(e):(console.warn("[Content] Surround queries requires `path` prop to be set."),console.warn("[Content] Query without `path` will return regular `find()` results."),r.find()):r.find()});return{isPartial:h,data:v,refresh:y}},render(u){var m;const e=A(),{data:t,refresh:l,isPartial:a,path:o,only:s,without:f,where:d,sort:p,limit:h,skip:v,locale:y,find:r}=u,i={path:o,only:s,without:f,where:d,sort:p,limit:h,skip:v,locale:y,find:r};if(i.find==="one"){if(!t&&(e==null?void 0:e["not-found"]))return e["not-found"](n({props:i},this.$attrs));if(t._type&&t._type==="markdown"&&!((m=t==null?void 0:t.body)!=null&&m.children.length))return e.empty(n({props:i},this.$attrs))}else if((!t||!t.length)&&e!=null&&e["not-found"])return e["not-found"](n({props:i},this.$attrs));return e!=null&&e.default?e.default(n({data:t,refresh:l,isPartial:a,props:i},this.$attrs)):((g,S)=>Q("pre",null,JSON.stringify({message:"You should use slots with <ContentQuery>!",slot:g,data:S},null,2)))("default",{data:t,props:i,isPartial:a})}});export{z as default};
