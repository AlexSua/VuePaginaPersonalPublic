import{_ as J,d as K,w as G,K as g,o as v,c as y,a as l,t as q,O as le,P as re,J as d,r as xe,n as _,b as r,aa as se,ab as ke,X as Ce,h as ye,Y as Ve,f as De,a9 as Te,ac as Oe,H as j,G as N,R as P,Z as Ae}from"./entry-5679079d.mjs";import{u as Me}from"./useSeo-35271e5f.mjs";const Le=K({__name:"RadioList",props:{title:null,items:null,modelValue:null,disabled:{type:Boolean}},emits:["update:modelValue"],setup(m,{expose:e,emit:a}){e();const t=m;G(()=>t.modelValue,n=>{a("update:modelValue",n)});const o={props:t,emits:a};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}}),Re={class:"flex flex-col w-full px-5"},Ee={class:"text-vanilla-yellow border-b-light-50 border-solid border-b-[2.5px]"},ze=["for"];function Fe(m,e,a,t,o,n){const s=g("RadioButton");return v(),y("div",Re,[l("h3",Ee,q(a.title),1),(v(!0),y(le,null,re(a.items,(i,u)=>(v(),y("div",{class:"field-radiobutton m-2 mt-2",key:u+i.label},[d(s,{modelValue:a.modelValue,"onUpdate:modelValue":e[0]||(e[0]=f=>a.modelValue=f),id:i.label,name:a.title,value:i.label,disabled:a.disabled,class:"mx-2"},null,8,["modelValue","id","name","value","disabled"]),l("label",{for:i.label},q(i.label),9,ze)]))),128))])}var Ie=J(Le,[["render",Fe]]);const Ue=K({__name:"Drawer",props:{title:null,open:{type:Boolean}},emits:["update:open"],setup(m,{expose:e,emit:a}){e();const n={props:m,emit:a,closeFun:()=>{a("update:open",!1)}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}}),Be={class:"flex flex-col h-screen w-full"},je={class:"basis-[5rem] flex-grow-0 flex flex-row bg-dark-400 m-4 cool-shadow overflow-hidden"},We={class:"flex-1 flex align-middle justify-start items-center pl-4"},Ne={class:"flex-0 w-20 items-center flex justify-center"},Pe={class:"flex-1 flex flex-col relative bg-dark-400 m-4 cool-shadow overflow-hidden"},He={class:"absolute left-0 right-0 bottom-0 top-0"};function Ge(m,e,a,t,o,n){const s=g("Button");return v(),y("div",{class:_(["flex-grow-0 w-md h-screen z-50 flex-col overflow-hidden transition-all duration-[400ms] text-light-50 box-content max-w-full <sxl:fixed <sxl:right-0 <sxl:top-0 <sxl:bottom-0",{"!w-0":!a.open}])},[l("div",Be,[l("div",je,[l("div",We,[l("h2",null,q(a.title),1)]),l("div",Ne,[d(s,{icon:"pi pi-times",class:"p-button-rounded p-button-text !text-light-50",onClick:t.closeFun})])]),l("div",Pe,[l("div",He,[xe(m.$slots,"default",{},void 0,!0)])])])],2)}var qe=J(Ue,[["render",Ge],["__scopeId","data-v-3ea764bc"]]);const Je=K({__name:"Chat",props:{modelValue:null},emits:["update:modelValue"],setup(m,{expose:e,emit:a}){e();const t=m,o=r(""),n=r(null);function s(){o.value&&(a("update:modelValue",[...t.modelValue,{data:o.value.trim(),own:!0}]),o.value="")}function i(f){f.key==="Enter"&&s()}G(()=>t.modelValue,f=>{n.value.scrollTop+n.value.offsetHeight==n.value.scrollHeight&&setTimeout(()=>{n.value.scrollTop=n.value.scrollHeight},20)},{deep:!0});const u={input:o,chatMessagesContainer:n,props:t,emits:a,sendMessage:s,sendMessageChatEnter:i};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}}),Ke={ref:"chatContainer",class:"flex flex-1 h-full flex-col p-4 min-w-[300px]"},Ze={ref:"chatMessagesContainer",class:"flex-1 w-full overflow-auto font-normal text-base break-words pb-4 flex flex-col"},Xe={ref:"chatInputContainer",class:"inline-flex flex-grow-0 w-full align-center pt-5"};function Ye(m,e,a,t,o,n){const s=g("InputText"),i=g("Button");return v(),y("div",Ke,[l("div",Ze,[(v(!0),y(le,null,re(a.modelValue,(u,f)=>(v(),y("div",{class:_(["bg-dark-50 max-w-6/10 p-2 px-4 m-2 rounded-lg self-start",{"self-message":u.own}]),key:f},q(u.data),3))),128))],512),l("div",Xe,[d(s,{type:"text",class:"w-full",modelValue:t.input,"onUpdate:modelValue":e[0]||(e[0]=u=>t.input=u),onKeydown:t.sendMessageChatEnter},null,8,["modelValue"]),d(i,{icon:"pi pi-chevron-right",class:"p-button-rounded p-button-secondary p-button-text",onClick:t.sendMessage})],512)],512)}var Qe=J(Je,[["render",Ye],["__scopeId","data-v-d8289092"]]);class $e{constructor(e){this._devices=[],this._currentStream=new MediaStream,this._currentScreenStream=new MediaStream,this._videoLocal=e}get currentDevices(){const e=this.currentVideoTracks,a=this.currentAudioTracks;return this._currentStream?{audio:a[0]&&a[0].label,video:e[0]&&e[0].label}:null}get mediaDevices(){return this._devices}get audioDevices(){return this._devices.filter(e=>e.kind=="audioinput")}get videoDevices(){return this._devices.filter(e=>e.kind=="videoinput")}get currentStream(){return this._currentStream}get currentVideoTracks(){return this._currentStream.getVideoTracks()}get currentVideoCapabilities(){return this.currentStream.getVideoTracks()[0]?this.currentStream.getVideoTracks()[0].getCapabilities():null}get currentAudioTracks(){return this._currentStream.getAudioTracks()}async getMediaDevices(){return this._devices=await navigator.mediaDevices.enumerateDevices(),console.log(this._devices),this._devices}getMediaDeviceByName(e){return e?this._devices.find(a=>a.label==e):null}async getMediaDevicesStream(e={video:!0,audio:!0}){if(navigator&&navigator.mediaDevices)try{return await this.getMediaDevices(),this.audioDevices.length<=0&&(e.audio=!1),this.videoDevices.length<=0&&(e.video=!1),this._currentStream=await navigator.mediaDevices.getUserMedia(e),this._currentStream}catch(a){return console.log(a),null}return null}async getScreenStream(){if(navigator&&navigator.mediaDevices)try{return this._currentScreenStream=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!0}),console.log(this._currentScreenStream),await this.stopAndRemoveVideo(),this.currentStream.addTrack(this._currentScreenStream.getVideoTracks()[0]),this._currentScreenStream}catch(e){return console.log(e),null}return null}async initializeLocalStream(e={audio:{autoGainControl:!1,channelCount:1,echoCancellation:!0,latency:0,noiseSuppression:!0,sampleRate:48e3,sampleSize:16},video:!0}){const a=await this.getMediaDevicesStream(e);return a?(this.attachStreamToLocalVideo(a),a):null}async stopLocalStream(){this.currentStream.getTracks().forEach(e=>e.stop())}async changeSourceStream(e,a){this.currentDevices.audio!=e&&(await this.stopAndRemoveAudio(),await this.startAudio(e)),this.currentDevices.video!=a&&(await this.stopAndRemoveVideo(),await this.startVideo(a))}attachStreamToLocalVideo(e){e&&(console.log(this._videoLocal),this._videoLocal&&e&&(this._videoLocal.value.srcObject=e),this._videoLocal.value.muted=!0,this._videoLocal.value.play())}async stopAndRemoveVideo(){this.currentVideoTracks.forEach(e=>e.enabled=!1),await new Promise(e=>setTimeout(e,100)),this.currentVideoTracks.forEach(e=>{e.stop(),this._currentStream.removeTrack(e)})}stopAndRemoveAudio(){this.currentAudioTracks.forEach(e=>{e.stop(),this._currentStream.removeTrack(e)})}stopAudio(){this.currentVideoTracks.forEach(e=>e.stop())}stopVideo(){this.currentAudioTracks.forEach(e=>e.stop())}async startVideo(e){const a=this.getMediaDeviceByName(e);let t=await navigator.mediaDevices.getUserMedia({video:a?{deviceId:a.deviceId}:!1});return this.currentVideoTracks[0]&&this.currentStream.removeTrack(this.currentVideoTracks[0]),this.currentStream.addTrack(t.getVideoTracks()[0]),t}async startAudio(e){const a=this.getMediaDeviceByName(e);let t=await navigator.mediaDevices.getUserMedia({audio:a?{deviceId:a.deviceId,autoGainControl:!1,channelCount:1,echoCancellation:!0,latency:0,noiseSuppression:!0,sampleRate:48e3,sampleSize:16}:!1});return this.currentAudioTracks[0]&&this.currentStream.removeTrack(this.currentAudioTracks[0]),this.currentStream.addTrack(t.getAudioTracks()[0]),t}disableVideo(){this.currentVideoTracks.forEach(e=>e.enabled=!1)}enableVideo(){this.currentAudioTracks.forEach(e=>e.enabled=!0)}disableAudio(){this.currentAudioTracks.forEach(e=>e.enabled=!1)}enableAudio(){this.currentAudioTracks.forEach(e=>e.enabled=!0)}}class H{constructor(e,a,t,o,n){this._localCandidates=[],this._remoteCandidates=[],this._videoChatSendStream=new MediaStream,this._videoChatSenders={},this._receiveStreams={},this._dataChannels={},this._websocket=null,this._signalingFromWebsocket=!1,this._alfa=!1,this._temporary_alfa=!1,this._connected=!1,this._state="",this.websocket_configuration={address:"wss://skynet.sytes.net:5355/ws/"},this.configuration={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"turn:skynet.sytes.net:5349",username:"guest",credential:"&!bYELZK$&X^n5Tm#bKu6bQe"}]},this.pc=new RTCPeerConnection(this.configuration),this._onTrack=a,this._onDataChannel=t,this._writeOnChat=o,this._writeOnOffer=n,this._mediaSourcesHandler=e,this.pc.onicecandidate=s=>{if(s.candidate)this._localCandidates.push(s.candidate);else{const i={sdp:this.pc.localDescription,candidate:this._localCandidates},u=se.compressToEncodedURIComponent(JSON.stringify(i));this._signalingFromWebsocket&&this._websocket?this._websocket.send(u):(n?n(u):console.log(u),navigator.clipboard.writeText(u))}},this.pc.ontrack=s=>{s.streams.forEach(i=>{i.id in this._receiveStreams||(this._receiveStreams[i.id]=i)}),this._onTrack&&this._onTrack(this,s.track,s.streams)},this.pc.ondatachannel=s=>{const i=s.channel;this._dataChannels[i.label]=i,i.label!=="p2p"?this._onDataChannel&&this._onDataChannel(this,this._dataChannels[i.label]):this.p2pDataChannelInitialization(i)},this.pc.oniceconnectionstatechange=s=>{console.log(this.pc.iceConnectionState)},this.pc.onnegotiationneeded=async s=>{if(this._alfa||this._temporary_alfa){if(this._temporary_alfa=!1,console.log("create offer"),this.pc.signalingState!="stable")return;const i=await this.pc.createOffer();await this.pc.setLocalDescription(i),this._dataChannels.p2p.send(JSON.stringify({sdp:this.pc.localDescription}))}else setTimeout(()=>{this.pc.signalingState=="stable"&&(this._temporary_alfa=!0,this.pc.onnegotiationneeded&&this.pc.onnegotiationneeded(s))},1e3)},this.pc.onsignalingstatechange=s=>{console.log("signaling state: "+this.pc.signalingState),this._state=String(this.pc.signalingState)}}async createOffer(){console.log("create offer"),this._localCandidates=[],"p2p"in this._dataChannels||(this._alfa=!0,this.attachDataChannel());const e=await this.pc.createOffer();return await this.pc.setLocalDescription(e),e}_generateUUID(){var e=new Date().getTime(),a=typeof performance!="undefined"&&performance.now&&performance.now()*1e3||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var o=Math.random()*16;return e>0?(o=(e+o)%16|0,e=Math.floor(e/16)):(o=(a+o)%16|0,a=Math.floor(a/16)),(t==="x"?o:o&3|8).toString(16)})}_createWebsocket(e,a=0){return new Promise(async function(t,o){e||(e=this._generateUUID()),this._websocket=new WebSocket(this.websocket_configuration.address+e),this._websocket.onopen=()=>{t(e)},this._websocket.onmessage=async n=>{n.data.startsWith("/get")?(this._signalingFromWebsocket=!0,this.createOffer()):(this._signalingFromWebsocket=!0,this.createAnswerFromString(n.data))},this._websocket.onclose=n=>{console.log("websocket closed")},this._websocket.onerror=n=>{this._websocket=null,t(null)}}.bind(this))}async websocketGenerateLink(){return await this._createWebsocket()}async websocketConsumeLink(e){return await this._createWebsocket(e)}async close(){this.pc.close(),this._websocket&&this._websocket.close(1e3,"close")}async createAnswerFromString(e){const a=se.decompressFromEncodedURIComponent(e);a&&(e=a),await this.createAnswer(JSON.parse(e))}async createAnswer(e){let a=null;if(e.sdp){const t=e.sdp;try{try{await new Promise((o,n)=>{setTimeout(()=>o(!0),100)}),await this.pc.setRemoteDescription(e.sdp)}catch(o){console.log(o),await this.pc.setRemoteDescription(e.sdp)}if(t.type=="offer"&&(console.log("create answer"),a=await this.pc.createAnswer(),await this.pc.setLocalDescription(a)),e.candidate){console.log("adding candidate"),this._remoteCandidates=e.candidate;for(const o of e.candidate)await this.pc.addIceCandidate(o)}return a}catch(o){return console.log(o),null}}return a}attachVideoChatStream(e=this._mediaSourcesHandler.currentStream){const a=e.getTracks();console.log(a),console.log(this._mediaSourcesHandler),Object.entries(this._videoChatSenders).forEach(([t,o])=>{var s;const n=a.find(i=>i.kind==t);console.log(n),n&&n!=null?(n==null?void 0:n.label)!=((s=o.track)==null?void 0:s.label)&&(o.replaceTrack(n),console.log("replace"+n.label)):(this.pc.removeTrack(o),delete this._videoChatSenders[t])}),a.forEach(t=>{this._videoChatSenders[t.kind]||(this._videoChatSenders[t.kind]=this.pc.addTrack(t,e))})}attachDataChannel(e="p2p",a=0){console.log("attach datachannel:"+e);const t=this.pc.createDataChannel(e,{negotiated:!1,id:a});this._dataChannels[t.label]=t,e!=="p2p"?this._onDataChannel&&this._onDataChannel(this,this._dataChannels[t.label]):this.p2pDataChannelInitialization(this._dataChannels[t.label])}p2pDataChannelInitialization(e){e.onopen=async a=>{console.log("p2p is open!"),this._connected=!0,this._videoChatSendStream&&this.attachVideoChatStream(),this._websocket&&this._websocket.close(1e3,"close"),this._alfa&&this.attachDataChannel("chat",2)},e.onclose=()=>{console.log("channel close"),this._connected=!1},e.onmessage=async a=>{const t=JSON.parse(a.data),o=await this.createAnswer(t);o&&e.send(JSON.stringify({sdp:o}))}}get dataChannels(){return this._dataChannels}set videochatSendStream(e){this._videoChatSendStream=e}get videochatSendStream(){return this._videoChatSendStream}get remoteStreams(){return this._receiveStreams}get connected(){return this._connected}get state(){return this._state}}const et=K({__name:"videochat",setup(m,{expose:e}){e();let a,t;const o=ke(),n=Ce(),s=ye();Me({title:"VideoChat",description:"One click videochat",image:"",type:"WebSite",location:s.path});const i=r(null),u=r(null),f=r(null);let Z;const O=r(!0),R=r([]),E=r(0),w=r(!1),b=r(!1),S=r(!1),c=r(!1),A=r(!1),k=r(""),z=Ve({video:[],audio:[]}),F=r(!0),X=r(!1),M=r(),V=r(),D=r(!0),C=r(!0),ce=r(!1),W=r(!1),T=r(!1),te=r(""),ae=r(""),de=()=>{b.value?b.value=!1:(E.value=0,S.value==!0?(S.value=!1,setTimeout(()=>b.value=!0,100)):b.value=!0)},oe=()=>{S.value?S.value=!1:b.value==!0?(b.value=!1,setTimeout(()=>S.value=!0,100)):S.value=!0},ue=async()=>{T.value=!0,C.value?(!w.value&&await a.stopAndRemoveVideo(),C.value=!1):V.value&&(!w.value&&await a.startVideo(V.value),C.value=!0),t&&t.attachVideoChatStream(),T.value=!1},he=async()=>{T.value=!0,D.value?(await a.stopAndRemoveAudio(),D.value=!1):M.value&&(await a.startAudio(M.value),D.value=!0,t&&t.attachVideoChatStream()),t&&t.attachVideoChatStream(),T.value=!1},fe=async()=>{A.value?A.value=!1:A.value=!0},me=r([{label:"Exit",icon:"pi pi-angle-left text-vanilla-yellow ",command:()=>{ie(),n.push("/")}},{label:"Serverless",icon:"pi pi-server",command:()=>{c.value=!0}},{label:"Maximize",icon:"pi pi-window-maximize",command:()=>{W.value&&f.value?f.value.requestFullscreen():i.value.requestFullscreen()}},{label:"Settings",icon:"pi pi-cog",class:"p-button-raised",command:()=>{oe()}}]);function L(h){R.value.push(h)}function ve(h){t&&t.dataChannels.chat&&t.dataChannels.chat.send(h[h.length-1].data)}async function pe(){if(!k.value){if(console.log(k.value),n.push({path:"/videochat"}),t=new H(a,I,U,L,B),!await t.websocketGenerateLink()){o.add({severity:"error",summary:"Error",detail:"Error generating link. Contact the signaling server system administrator.",group:"br",life:3e3});return}let p=await t.websocketGenerateLink();k.value=document.location.href+"?room="+p,n.push({path:"/videochat",query:{room:p}})}A.value=!0}function _e(){navigator.clipboard.writeText(k.value),A.value=!1}function I(h,p,x){console.log("ontrack",h,p,x),f.value&&(f.value.srcObject=x[0],x[0].addTrack(p),f.value.play())}function U(h,p){p.onopen=async function(x){console.log(this.label+" is open!"),c.value=!1,p.send("hello"),W.value=!0},p.onclose=()=>{console.log("channel close"),f.value.srcObject=null,W.value=!1,Y(),$()},p.onmessage=x=>{console.log(x.data),L({data:x.data,own:!1}),b.value||E.value++}}function ie(){k.value="",n.push({path:"/videochat"}),Y()}function Y(){t&&t.close()}function B(h){ae.value=h}async function ge(){t=new H(a,I,U,L,B),await t.createOffer()}async function be(){(!t||t.state!="have-local-offer")&&(t=new H(a,I,U,L,B)),await t.createAnswerFromString(te.value)}async function we(){F.value=!1,await Q(),z.audio=a.audioDevices,z.video=a.videoDevices,F.value=!0}function Q(){a=new $e(i),a.initializeLocalStream().then(async h=>{if(!h)return C.value=!1,D.value=!1,o.add({severity:"error",summary:"Error",detail:"Error while trying to get the camera. Check the permissions for the camera.",group:"br",life:3e3}),X.value=!0,null;X.value=!1,await a.getMediaDevices(),a.currentAudioTracks.length>0&&(D.value=!0),a.currentVideoTracks.length>0&&(C.value=!0),z.audio=a.audioDevices,z.video=a.videoDevices,M.value=a.currentDevices.audio,V.value=a.currentDevices.video})}async function Se(){if(F.value=!1,w.value)await a.stopAndRemoveVideo(),C.value&&await a.startVideo(V.value),t&&t.attachVideoChatStream(),O.value=!0,w.value=!1;else{if(!await a.getScreenStream())return;t&&t.attachVideoChatStream(),O.value=!1,w.value=!0}F.value=!0}async function $(){k.value&&(t=new H(a,I,U,L,B),await t.websocketConsumeLink(s.query.room)||o.add({severity:"error",summary:"Error",detail:"Error while trying to connnect to the signaling server",group:"br",life:3e3}))}const ee=h=>async(p,x)=>{{if(h==="audio"&&!D.value||h==="video"&&!C.value)return null;x&&(T.value=!0,await a.changeSourceStream(M.value,V.value),T.value=!1,t&&t.attachVideoChatStream()),h=="video"&&a.currentVideoCapabilities&&(O.value=!JSON.stringify(a.currentVideoCapabilities.facingMode).includes("environment"))}};G(M,ee("audio")),G(V,ee("video")),De(()=>{Q(),s.query.room&&s.query.room.length>0&&(k.value=document.location.href,$())}),Te(()=>{a.stopLocalStream()});const ne={mediaSourcesHandler:a,webRtcConnection:t,toast:o,router:n,route:s,videoLocal:i,videoLocalContainer:u,videoRemote:f,videoRemoteStream:Z,frontCamera:O,chatMessages:R,nonReadedMessages:E,screenSharing:w,drawerChatOpen:b,drawerSettingsOpen:S,dialogServerLessOpen:c,dialogLinkOpen:A,link:k,devices:z,mediaDevicesAllowed:F,getMediaDevices:X,audioSelected:M,videoSelected:V,audioEnabled:D,videoEnabled:C,videoRemoteFullSize:ce,call:W,mediaSelectionDisabled:T,sdpMessageInput:te,offerTextArea:ae,drawerChatOpenFun:de,drawerSettingsOpenFun:oe,enableVideoFunc:ue,enableAudioFunc:he,linkDialogOpenFunc:fe,items:me,writeOnChat:L,sendChatMessage:ve,generateLink:pe,copyLinkToClipboard:_e,ontrack:I,onDataChannel:U,closeConnection:ie,closeWebRTCConnection:Y,writeOnOffer:B,createOffer:ge,createOrRecibeAnswer:be,refreshMediaDevices:we,initializeLocalStream:Q,initializeScreenStream:Se,initalizeWebRTCfromCurrentRoomParam:$,onSourceChange:ee};return Object.defineProperty(ne,"__isScriptSetup",{enumerable:!1,value:!0}),ne}}),tt={class:"flex w-full h-screen bg-black"},at={class:"flex-1 p-inputgroup py-2"},ot={class:"flex-1 p-inputgroup py-2"},it={class:"flex-1 p-inputgroup py-2"},nt={class:"flex-1 p-inputgroup py-2"},st={class:"flex-1 p-inputgroup py-2"},lt={class:"flex-1"},rt={class:"flex-1 h-screen flex relative bg-black"},ct={class:"absolute flex m-auto h-screen w-full items-center justify-center"},dt={class:"flex flex-1 min-w-[350px] flex-col"},ut={class:"field-checkbox m-9"},ht=l("label",{for:"video-fullsize",class:"mx-3"},"Fill the screen size",-1),ft={class:"flex flex-1 items-center justify-start ml-5"},mt={class:"flex flex-1 items-center justify-center"},vt=l("div",{class:"flex flex-1 items-center justify-center"},null,-1);function pt(m,e,a,t,o,n){const s=g("InputText"),i=g("Button"),u=g("Textarea"),f=g("Dialog"),Z=g("SpeedDial"),O=g("Toast"),R=Ie,E=g("Checkbox"),w=qe,b=Qe,S=Oe("badge");return v(),y("div",tt,[d(f,{header:"Serverless connection",footer:"",visible:t.dialogServerLessOpen,"onUpdate:visible":e[2]||(e[2]=c=>t.dialogServerLessOpen=c),class:"flex"},{default:j(()=>[l("div",at,[d(s,{placeholder:"Introduce offer/answer",modelValue:t.sdpMessageInput,"onUpdate:modelValue":e[0]||(e[0]=c=>t.sdpMessageInput=c)},null,8,["modelValue"]),d(i,{label:"Go",onClick:t.createOrRecibeAnswer})]),l("div",ot,[d(i,{label:"Create offer",class:"w-full",onClick:t.createOffer})]),l("div",it,[d(u,{modelValue:t.offerTextArea,"onUpdate:modelValue":e[1]||(e[1]=c=>t.offerTextArea=c),disabled:"",rows:"5",class:"min-w-[17rem] w-full"},null,8,["modelValue"])])]),_:1},8,["visible"]),d(f,{header:"Share link",footer:"",visible:t.dialogLinkOpen,"onUpdate:visible":e[4]||(e[4]=c=>t.dialogLinkOpen=c),class:"flex w-50rem"},{default:j(()=>[l("div",nt,[d(u,{modelValue:t.link,"onUpdate:modelValue":e[3]||(e[3]=c=>t.link=c),disabled:"",rows:"2",class:"w-[50rem] w-full"},null,8,["modelValue"])]),l("div",st,[d(i,{label:"Copy to clipboard",class:"w-full",onClick:t.copyLinkToClipboard})])]),_:1},8,["visible"]),l("div",{ref:"superiorToolBar",class:_(["absolute flex flex-row w-full text-right z-30 transition-all duration-400 disable-rounded",{"lg:pr-[400px]":t.drawerSettingsOpen}])},[d(Z,{radius:140,model:t.items,showIcon:"pi pi-bars text-vanilla-yellow",tooltipOptions:{event:null,position:"right"},hideIcon:"pi pi-times text-vanilla-yellow",direction:"down-right",type:"quarter-circle",buttonClass:"p-button-text",class:"up left transform !-translate-x-5 !-translate-y-5 disable-rounded"},null,8,["model"]),l("div",lt,[t.call?(v(),N(i,{key:0,icon:"pi pi-comments p-text-secondary",class:"p-button-rounded p-button-text !p-12 up right transform !translate-x-6 !-translate-y-8",onClick:t.drawerChatOpenFun},{default:j(()=>[Ae(l("i",{class:_(["pi pi-comments mr-2 p-text-secondary text-vanilla-yellow",{"hide-badge":t.nonReadedMessages==0}]),style:{"font-size":"2rem"}},null,2),[[S,t.nonReadedMessages]])]),_:1})):P("",!0)])],2),l("div",rt,[l("video",{autoplay:"",ref:"videoRemote",class:_(["flex-1 max-h-screen w-full",{"!object-cover":t.videoRemoteFullSize}])},null,2),l("div",{ref:"videoLocalContainer",class:_(["absolute flex m-auto h-screen w-full items-center right-4 bottom-4 transition-all duration-500",{"w-1/4":t.call,"h-1/4":t.call}])},[l("video",{autoplay:"",ref:"videoLocal",class:_(["flex-1 w-full max-h-screen max-h-full max-w-full <lg:object-cover",{"transform  rotate-y-180":t.frontCamera}])},null,2)],2),l("div",ct,[t.getMediaDevices&&!t.call?(v(),N(i,{key:0,icon:"pi pi-camera",label:"Get media devices",class:"p-button-danger m-auto flex-grow-0",onClick:t.initializeLocalStream})):P("",!0)]),d(O,{position:"bottom-left",group:"br"})]),d(w,{open:t.drawerSettingsOpen,"onUpdate:open":e[8]||(e[8]=c=>t.drawerSettingsOpen=c),class:"w-[400px] disable-rounded",title:"Settings"},{default:j(()=>[l("div",dt,[d(R,{modelValue:t.videoSelected,"onUpdate:modelValue":e[5]||(e[5]=c=>t.videoSelected=c),items:t.devices.video,title:"Video devices",disabled:t.mediaSelectionDisabled},null,8,["modelValue","items","disabled"]),d(R,{modelValue:t.audioSelected,"onUpdate:modelValue":e[6]||(e[6]=c=>t.audioSelected=c),items:t.devices.audio,title:"Audio devices",disabled:t.mediaSelectionDisabled},null,8,["modelValue","items","disabled"]),l("div",ut,[d(E,{id:"video-fullsize",modelValue:t.videoRemoteFullSize,"onUpdate:modelValue":e[7]||(e[7]=c=>t.videoRemoteFullSize=c),binary:!0},null,8,["modelValue"]),ht]),d(i,{icon:"pi pi-camera",label:"Refresh media devices",class:"p-button-danger m-auto flex-grow-0 !absolute bottom-0 right-0 left-0 min-w-[350px] w-full",onClick:t.refreshMediaDevices})])]),_:1},8,["open"]),d(w,{open:t.drawerChatOpen,"onUpdate:open":e[10]||(e[10]=c=>t.drawerChatOpen=c),title:"Chat",class:"w-[470px] disable-rounded"},{default:j(()=>[d(b,{modelValue:t.chatMessages,"onUpdate:modelValue":[e[9]||(e[9]=c=>t.chatMessages=c),t.sendChatMessage]},null,8,["modelValue"])]),_:1},8,["open"]),l("div",{ref:"lowerToolBar",class:_(["absolute bottom-10 flex flex-row w-full text-center z-30 transition-all duration-400 bottom-0 align-center items-center lower-toolbar",{"lg:pr-[400px]":t.drawerSettingsOpen||t.drawerChatOpen}])},[l("div",ft,[t.call?P("",!0):(v(),N(i,{key:0,icon:`pi pi-user-plus ${t.link?"pi-spin pi-spinner":""} `,onClick:t.generateLink,class:"p-button-rounded p-button-warning lower-toolbar-button"},null,8,["icon"]))]),l("div",mt,[d(i,{icon:"pi pi-desktop",class:_(["p-button-rounded lower-toolbar-button",{"button-disabled":!t.screenSharing}]),onClick:t.initializeScreenStream},null,8,["class"]),d(i,{disabled:t.mediaSelectionDisabled,icon:"pi pi-bell",class:_(["p-button-rounded lower-toolbar-button",{"button-disabled":!t.audioEnabled}]),onClick:t.enableAudioFunc},null,8,["disabled","class"]),d(i,{disabled:t.mediaSelectionDisabled,icon:"pi pi-video",class:_(["p-button-rounded lower-toolbar-button",{"button-disabled":!t.videoEnabled}]),onClick:t.enableVideoFunc},null,8,["disabled","class"]),t.call?(v(),N(i,{key:0,icon:"pi pi-phone",onClick:t.closeConnection,class:"p-button-rounded p-button-danger lower-toolbar-button transform rotate-z-134"})):P("",!0)]),vt],2)])}var bt=J(et,[["render",pt]]);export{bt as default};
